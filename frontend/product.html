<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>product</title>

    <link href="CSS/bootstrap.css" rel="stylesheet">
    <link href="CSS/product.css" rel="stylesheet">
    <script src="JS/bootstrap.min.js"></script>
    <script src="JS/bootstrap.bundle.js"></script>
    <script type="text/javascript" src="JS/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="CSS/bootstrap-icons.css">
    <script src="https://unpkg.com/@rdkit/rdkit/dist/RDKit_minimal.js"></script>
    <script src="JS/vue.global.js"></script>
</head>

<body>

    <nav id="nav" class="navbar navbar-expand-sm bg-secondary sticky-top">
        <div class="container-fluid col-3 pb-1">
            <div class="col-1"></div>
            <img src="./img/IMG-IGEM.png" width="50px" height="50px">
            <a class="nav-link nav-item dropdown text-center" href="#">M E I</a>
        </div>
        <div class="container-fluid col-9 pb-1">
            <div class="col-sm-4"></div>
            <div class="container-fluid navbar-collapse col-sm-4 float-right" id="nav-list">
                <a class="nav-link nav-item dropdown text-center" target="_blank" href="https://2022.igem.wiki/ustc-software">Wiki</a>
                <a href="MEI-userguide.html" target="_blank" class="nav-link nav-item dropdown text-center">Help</a>
                <a class="nav-link nav-item dropdown text-center" target="_blank" href="https://2022.igem.wiki/ustc-software/team">About us</a>
                <a class="nav-link nav-item dropdown text-center" href="#">References</a>
            </div>
            <div class="col-sm-1"></div>
        </div>
    </nav>

    <div class="product-container row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10 mb-4 rounded-3 p-0 border-2 border-dark"  style="box-shadow: 0px 0px 2px 2px #c8c8c8; " > 
				<!-- style="box-shadow: 4px 4px 5px 6px #c8c8c8; " -->
            <div class='row pe-0 me-0' id="main-container" style="--bs-gutter-x: 0;">
                <div class="col-4 me-0 pe-0"  id="reactant_or_product" >
									<!-- e是right s是left -->
                    <div class="text-center pb-2 mt-4">
                        <h5>
                            Please enter compounds:
                        </h5>
                    </div>
                    <div class="btn-group-sm  w-75 mx-auto">
                        <button type="button" class="btn selector-button form-check mx-4 " style="font-size: 1.34rem;">
                            <input type="radio" class="form-check-input" id="reactant" name="RorP" value="reactant"
                                checked>
                            <label class="form-check-label " for="reactant">
                                Reactant
                            </label>
                        </button>
                        <button type="button" class="btn selector-button form-check mx-4 " style="font-size: 1.34rem;">
                            <input type="radio" class="form-check-input" id="product" name="RorP" value="product">
                            <label class="form-check-label " for="product" >
                                Product
                            </label>
                        </button>
                    </div>
                    <div class="text-center ">
                        <h5>
                            Please enter cofactors:
                        </h5>
                        <h5>
                            (Optional)
                        </h5>
                    </div>
                    <div class="btn-group-vertical btn-group-lg my-lg-1 w-75 mx-auto" id = "cofactors">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input cofactors-check" id="check1" value="NAD">
                            <label class="form-check-label" for="check1">NAD</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input cofactors-check" id="check2" name="option2" value="NADP">
                            <label class="form-check-label" for="check2">NADP</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input cofactors-check" id="check3" value="NADH">
                            <label class="form-check-label" for="check3">NADH</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input cofactors-check" id="check4" value="NADPH">
                            <label class="form-check-label" for="check4">NADPH</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input cofactors-check" id="check5" value="FAD">
                            <label class="form-check-label" for="check5">FAD</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input cofactors-check" id="check6" value="Metal-ion">
                            <label class="form-check-label" for="check6">Metal-ion</label>
                        </div>
                    </div>
                    <div class="p-0 mx-auto mt-1 w-75" style="display: block;">
                        <select class="form-select " id="type_list" name="typeList" >
                            <option style="display: none;font-size: 9px;" value=0>Reaction Type</option>
                            <option class="type" id="type1" value=1>Redox</option>
                            <option class="type" id="type2" value=2>Transfer</option>
                            <option class="type" id="type3" value=3>Hydrolysis</option>
                            <option class="type" id="type4" value=4>Elimination</option>
                            <option class="type" id="type5" value=5>Ismerization</option>
                            <option class="type" id="type6" value=6>Ligation</option>
                            <option class="type" id="type7" value=7>All</option>
                        </select>
                    </div>
                    <div class="my-3 w-75 mx-auto">
                        <input type="text" class="form-control form-control-sm" placeholder="Enzyme Organism" id="classtype" name="classtype">
                    </div>
                </div>
                <div class="col-8 ms-2 m-auto" id="search-frame">
                    <iframe class="m-auto row " name="chemSearch" id='chem_search'
                        src="ketcher-master/ketcher.html"  style="margin: auto;"></iframe>
                </div>
                <div class="row">
                    <div class="col-2"></div>
                    <div class="col-8" id = "info-container">
                        <button class="btn p-2 px-4 fs-4 fw-bold m-auto mb-2" id="search_button" type="submit" style="display: block;"> &nbsp; Search &nbsp; </button>
                    </div>
                    <div class="col-2"></div>
                </div>

            </div>
        </div>
        <div class="col-sm-1" ></div>
    </div>

    <div id="result">
        <div class="window-out p-2">
            <div class="sec-input pb-2 mb-2">
                <div class="h5 p-1">Choose the suitable substrate</div>
                <div class="d-flex p-1">
                    <div class="flex-fill">substrate</div>
                    <select class="flex-fill form-select sec-choice">
                    </select>
                </div>
                <div class="d-flex p-1">
                    <div class="flex-fill">Temperature</div>
                    <select class="flex-fill form-select temp-choice">
                    </select>
                </div>
                <div class="d-flex p-1">
                    <div class="flex-fill">pH</div>
                    <select class="flex-fill form-select ph-choice">
                    </select>
                </div>
                <div class="row">
                    <div class="col-3"></div>
                    <div class="col-6 d-flex justify-content-around">
                        <button class="another-search btn btn-outline-success shadow">Search!</button>
                    </div>
                    <div class="col-3"></div>
                </div>
            </div>
            <div v-show="Data.second" class="pt-2">
                <table class="sec-table table table-striped table-hover">
                    <thead>
                        <tr>
                            <th></th>
                            <th class="align-middle">km_1</th>
                            <th class="align-middle">km_2</th>
                            <th class="align-middle">kcat_1</th>
                            <th class="align-middle">kcat_2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Max</td>
                            <td>{{Data.secRes.km1_range[0]}}</td>
                            <td>{{Data.secRes.km2_range[0]}}</td>
                            <td>{{Data.secRes.kcat1_range[0]}}</td>
                            <td>{{Data.secRes.kcat2_range[0]}}</td>
                        </tr>
                        <tr>
                            <td>Min</td>
                            <td>{{Data.secRes.km1_range[1]}}</td>
                            <td>{{Data.secRes.km2_range[1]}}</td>
                            <td>{{Data.secRes.kcat1_range[1]}}</td>
                            <td>{{Data.secRes.kcat2_range[1]}}</td>
                        </tr>
                    </tbody>
                </table>
                <h5>According to this formula:</h5>
                <img src="img/formula.svg" />
            </div>
        </div>
        <div v-show="Data.display">
        <!-- <div> -->
            <div id="choose-display" class="row m-2 my-5">
                <div class="col-1"></div>
                <div class="col-2 h5 fw-bolder">Choose Ways to display:</div>
                <div class="form-check col-6 form-switch d-flex justify-content-center" style="transform:scale(1.5)">
                    <input type="checkbox" class="form-check-input p-2" id="cards" name="LorC" @click="radioCheck()" checked>
                    &nbsp;
                    <label class="form-check-label" id="modeId" for="cards">List</label>
                </div>
                <div class="col-3"></div>
            </div>
            <div class="row" v-show="Data.choice">
                <div class="col-1"></div>
                <div class="col-10 shadow px-0 py-2">
                    <table id="result_table" class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th class="align-middle">Serial Number</th>
                                <th class="align-middle">EC number</th>
                                <th class="align-middle">Cofactor</th>
                                <th class="align-middle">name &nbsp; 
                                    <input type="radio" class="form-check-input p-2" id="Max-radio" name="MoreorLess" checked @click="nameRender()">
                                    <label class="form-check-label fw-light">More</label>
                                    &nbsp;
                                    <input type="radio" class="form-check-input p-2" id="Min-radio" name="MoreorLess" @click="nameRender()">
                                    <label class="form-check-label fw-light">Hide</label>
                                </th>
                                <th class="align-middle">Percent</th>
                                <th class="align-middle">Kinetic</th>
                                <th class="align-middle">Nearest Reaction&nbsp;
                                    <input type="radio" class="form-check-input p-2" id="nr-Max-radio" name="MoreorLess2" checked @click="nearRender()">
                                    <label class="form-check-label fw-light">More</label>
                                    &nbsp;
                                    <input type="radio" class="form-check-input p-2" id="nr-Min-radio" name="MoreorLess2" @click="nearRender()">
                                    <label class="form-check-label fw-light">Hide</label>
                                </th>
                                <th class="align-middle">links</th>
                                <th class="align-middle">Auxiliary Reaction</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="result-item" v-for="index in parseInt(10 * Data.flag)">
                                <td>{{index}}</td>
                                <td>{{Data.response[index - 1].ECnum}}</td>
                                <td>{{Data.response[index - 1].cofactor}}</td>
                                <td class="enzyme-name">{{Data.response[index - 1].name}}</td>
                                <td>{{Data.response[index - 1].percent}}</td>
                                <td>
                                    <div class="d-flex">
                                        <button class="btn btn-info" @click="kineticShow($event)">Kinetic Info</button>
                                        <div class="kinetic-table">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th class="align-middle">pH</th>
                                                        <th class="align-middle">Temp</th>
                                                        <th class="align-middle">Refer</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr v-for="i in parseInt(Data.response[index - 1].ph.length)">
                                                        <td>
                                                            <div class="d-flex">
                                                                <div v-if="Data.response[index - 1].ph[i-1] == 0">
                                                                    null
                                                                </div>
                                                                <div v-else>
                                                                    <div class="flex-fill p-2" v-for="j in parseInt(Data.response[index - 1].ph[i-1].length)">{{Data.response[index - 1].ph[i-1][j-1]}}</div>
                                                                </div>
                                                                
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="d-flex">
                                                                <div v-if="Data.response[index - 1].temper[i-1] == 0">
                                                                    null
                                                                </div>
                                                                <div v-else>
                                                                    <div class="flex-fill p-2" v-for="j in parseInt(Data.response[index - 1].temper[i-1].length)">{{Data.response[index - 1].temper[i-1][j-1]}}</div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div v-if="Data.response[index - 1].refer[i-1] == 0">
                                                                null
                                                            </div>
                                                            <a v-else :href="Data.response[index - 1].refer[i-1]" target="_blank">Reference{{i}}</a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </td>
                                <td class="n-reaction">{{Data.response[index - 1].nearestReact}}</td>
                                <td>
                                    <div class="d-flex">
                                        <a target="_blank" :href=Data.response[index-1].link[0] class="flex-fill" style="text-decoration: none; color: #90d0d0;">
                                            <i class="bi bi-box-arrow-up-right"></i> &nbsp; BRENDA
                                        </a>
                                        <a target="_blank" :href=Data.response[index-1].link[1] class="flex-fill" style="text-decoration: none; color: #90d0d0;">
                                            <i class="bi bi-box-arrow-up-right"></i> &nbsp; Uniprot
                                        </a>
                                    </div>
                                    <div class="d-flex">
                                        <a target="_blank" :href=Data.response[index-1].link[2] class="flex-fill" style="text-decoration: none; color: #90d0d0;">
                                            <i class="bi bi-box-arrow-up-right"></i> &nbsp; PDB
                                        </a>
                                        <a target="_blank" :href=Data.response[index-1].link[3] class="flex-fill" style="text-decoration: none; color: #90d0d0;">
                                            <i class="bi bi-box-arrow-up-right"></i> &nbsp; PubMed
                                        </a>
                                    </div>
                                </td>
                                <td v-if="!Data.response[index-1].substrate_info || Data.response[index-1].substrate_info.length == 0">
                                    None.
                                </td>
                                <td v-else>
                                    <button class="secRecBtn btn btn-info shadow rounded-pill" @click="showSecRec($event)">Show</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-1"></div>
            </div>
            <div class="row" v-show="!Data.choice">
                <div class="col-1"></div>
                <div id="result-card" class="col-10">
                    <ul id="result-card-list" class="list-unstyled list-group">
                        <li class="card my-4" style="box-shadow: 4px 8px 10px 5px rgba(0, 0, 0, 0.2);" v-for="index in parseInt(10 * Data.flag)">
                            <div class="card-body d-flex">
                                <div class="col-3 list-group d-flex flex-column justify-content-center">
                                    <span style="display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" class="list-group-item list-group-item-primary">{{Data.response[index - 1].name}}</span>
                                    <div class="d-flex">
                                        <span style="display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" class="list-group-item list-group-item-warning">Confidence Level: {{Data.response[index - 1].percent}}</span>
                                        <span style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" class="flex-fill list-group-item list-group-item-success">{{Data.response[index - 1].ECnum}}</span>
                                    </div>
                                    <span style="display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" class="list-group-item list-group-item-warning">Cofactor: {{Data.response[index - 1].cofactor}}</span>
                                    <div class="d-flex">
                                        <button class="btn btn-info flex-fill" @click="kineticShow($event)">Kinetic Info</button>
                                        <div class="kinetic-table kinetic-table-card">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th class="align-middle">pH</th>
                                                        <th class="align-middle">Temp</th>
                                                        <th class="align-middle">Refer</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr v-for="i in parseInt(Data.response[index - 1].ph.length)">
                                                        <td>
                                                            <div class="d-flex">
                                                                <div v-if="Data.response[index - 1].ph[i-1] == 0">
                                                                    null
                                                                </div>
                                                                <div v-else>
                                                                    <div class="flex-fill p-2" v-for="j in parseInt(Data.response[index - 1].ph[i-1].length)">{{Data.response[index - 1].ph[i-1][j-1]}}</div>
                                                                </div>
                                                                
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="d-flex">
                                                                <div v-if="Data.response[index - 1].temper[i-1] == 0">
                                                                    null
                                                                </div>
                                                                <div v-else>
                                                                    <div class="flex-fill p-2" v-for="j in parseInt(Data.response[index - 1].temper[i-1].length)">{{Data.response[index - 1].temper[i-1][j-1]}}</div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div v-if="Data.response[index - 1].refer[i-1] == 0">
                                                                null
                                                            </div>
                                                            <a v-else :href="Data.response[index - 1].refer[i-1]" target="_blank">Reference{{i}}</a></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="d-flex">
                                        <a :href=Data.response[index-1].link[0] target="_blank" style="text-decoration: none; overflow: hidden; text-overflow: ellipsis;" class="flex-fill list-group-item list-group-item-info">
                                            <i class="bi bi-box-arrow-up-right"></i> &nbsp; BRENDA
                                        </a>
                                        <a :href=Data.response[index-1].link[1] target="_blank" style="text-decoration: none; overflow: hidden; text-overflow: ellipsis;" class="flex-fill list-group-item list-group-item-info">
                                            <i class="bi bi-box-arrow-up-right"></i> &nbsp; Uniprot
                                        </a>
                                    </div>
                                    <div class="d-flex">
                                        <a :href=Data.response[index-1].link[2] target="_blank" style="text-decoration: none; overflow: hidden; text-overflow: ellipsis;" class="flex-fill list-group-item list-group-item-info">
                                            <i class="bi bi-box-arrow-up-right"></i> &nbsp; PDB
                                        </a>
                                        <a :href=Data.response[index-1].link[3] target="_blank" style="text-decoration: none; overflow: hidden; text-overflow: ellipsis;" class="flex-fill list-group-item list-group-item-info">
                                            <i class="bi bi-box-arrow-up-right"></i> &nbsp; PubMed
                                        </a>
                                    </div>
                                </div>
                                <div class="col-1 list-group d-flex flex-column">
                                    <span class="h5 m-0 list-group-item list-group-item-success flex-fill">Most similar reaction
                                        <i class="similar-arr bi bi-arrow-right"></i>
                                    </span>
                                    <span v-if="!Data.response[index-1].substrate_info || Data.response[index-1].substrate_info.length == 0" class="flex-fill list-group-item list-group-item-secondary">
                                        No auxiliary reactions.
                                    </span>
                                    <span class="flex-fill" v-else>
                                        <button class="btn-sec-card btn btn-success h-100" @click="showSecRecCard($event)"> Show Auxiliary Reaction </button>
                                    </span>
                                </div>
                                <div class="col-8 svg-container d-flex justify-content-around">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-1"></div>
            </div>
            <div class="row m-4">
                <div class="col-5"></div>
                <button class="btn btn-info shadow rounded-pill tool-anchor col" @click="Data.flag += 1; length();" v-if="Data.seen">Browse the others</button>
                <div class="col-5"></div>
            </div>
        </div>
    </div>

    <footer>
		<div class="container-fluid row">
			<div class="col-1"></div>
			<div class="footer row col-10">
				<div class="col-sm-2 footer-section">
					<div class="footer-title">Team</div>
					<div class="logo-container">
						<a class="d-flex align-items-center flex-column" href="https://2022.igem.wiki/ustc-software" target="_blank">
							<img id="footer-logo" src="https://static.igem.wiki/teams/4240/wiki/img/img-igem.png" alt="USTC-Software">
							<div class="fs-5 team-footer footer-list">USTC-Software</div>
						</a>
					</div>
				</div>
				<div class="col-sm-5 footer-section">
					<div class="footer-title">Sponsors</div>
					<a class="footer-list d-block" href="https://www.ustcif.org.cn/default.php" target="_blank">Initiative Foundation</a>
					<a class="footer-list d-block" href="https://biox.ustc.edu.cn/" target="_blank">School of Life Science, USTC</a>
					<a class="footer-list d-block" href="https://www.teach.ustc.edu.cn/" target="_blank">Academic Affairs Office</a>
				</div>
				<div class="col-sm-5 footer-section">
					<div class="footer-title">Contact us</div>
					<div class="footer-list"><i class="bi bi-envelope"></i>&nbsp;Mail:&nbsp;USTC_Software2022@163.com</div>
					<div class="footer-list"><i class="bi bi-git"></i>&nbsp;<a href="https://gitlab.igem.org/2022/ustc-software">Gitlab</a></div>
					<div class="footer-list"><i class="bi bi-geo-alt-fill"></i>&nbsp;Address:University of Science and Technology of China, No.96, JinZhai Road Baohe District, Hefei, Anhui, 230026, P.R.China</div>
				</div>
			</div>
			<div class="col-1"></div>
		</div>

		<div class="footer-required mb-3">
			<div class="col-sm d-flex justify-content-center p-1"><small>© 2022 - Content on this site is licensed under a <a class="subfoot"
						href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution
						4.0 International license</a>.</small></div>

			<div class="col-sm d-flex justify-content-center p-1"><small>The repository used to create this website is available at <a
						href="https://gitlab.igem.org/2022/ustc-software">gitlab.igem.org/2022/ustc-software</a>.</small>
			</div>
			<div class="col-sm d-flex justify-content-center p-1"><small>University of Science and Technology of China, No.96, JinZhai Road Baohe District, Hefei, Anhui, 230026, P.R.China</small>
	</div>
		</div>

		<div class="wiki-tools row">
			<div class="col-sm-2"></div>
			<div class="col-sm-8 d-flex justify-content-around">
				<a href="https://tools.igem.org/wiki/2022/ustc-software" target="_blank" class="fs-5">Access Wiki Tools</a>
				<a href="https://gitlab.igem.org/2022/ustc-software" target="_blank" class="fs-5">View Source Code</a>
			</div>
			<div class="col-sm-2"></div>
		</div>
	</footer>
    
    <script src="JS/chemwork.js" type="text/javascript"></script>
    <script src="JS/product.js" type="text/javascript"></script>
</body>
</html>